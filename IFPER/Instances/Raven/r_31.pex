r([[[[a, 0,up, 0]], [[a,0,up, 1]], [[a,0,up, 2]]],  [[[b,0,mid, 0]], [[b,0,mid, 1]]]])->[[b],[0],[mid],[2]].
r([[[[b, 0,mid, 0]], [[b,0,mid, 1]], [[b,0,mid, 2]]],  [[[a,0,up, 0]], [[a,0,up, 1]]]])->[[a],[0],[up],[2]].
r([[[[a, 0,up, 0]], [[a,0,up, 1]], [[a,0,up, 2]]],  [[[b,0,mid, 0]], [[b,0,mid, 1]]]])->[[b],[0],[mid],[2]].
r([[[[b, 0,mid, 0]], [[b,0,mid, 1]], [[b,0,mid, 2]]],  [[[a,0,up, 0]], [[a,0,up, 1]]]])->[[a],[0],[up],[2]].